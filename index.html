<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“å±å‘Šç™½ | åªä¸ºä½ å¿ƒåŠ¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* é£˜èŠ±æ•ˆæœ */
        .petal {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50% 0;
            background: rgba(255, 255, 255, 0.8);
            animation: fall linear infinite;
            z-index: 1;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* åå­—è¾“å…¥å®¹å™¨ï¼ˆä»…å‘é€æ–¹å¯è§ï¼‰ */
        .name-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 10;
        }

        .name-container h2 {
            color: #e83e8c;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .name-input {
            padding: 12px 20px;
            border: 2px solid #ff6b9d;
            border-radius: 30px;
            width: 280px;
            font-size: 18px;
            outline: none;
            margin-bottom: 20px;
            text-align: center;
        }

        .name-input:focus {
            border-color: #e83e8c;
            box-shadow: 0 0 10px rgba(232, 62, 140, 0.3);
        }

        .start-btn {
            background: linear-gradient(to right, #ff6b9d, #e83e8c);
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(232, 62, 140, 0.4);
        }

        /* åˆ†äº«é“¾æ¥æç¤º */
        .share-tip {
            margin-top: 20px;
            color: #e83e8c;
            font-size: 16px;
            display: none;
        }

        .share-link {
            margin-top: 10px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 10px;
            color: #333;
            font-size: 14px;
            word-break: break-all;
            display: none;
        }

        /* å‘Šç™½å¼¹çª— */
        .confession-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .modal-content {
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 100%);
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.5);
            position: relative;
            animation: modalAppear 0.8s ease-out;
            max-width: 500px;
            width: 90%;
        }

        @keyframes modalAppear {
            0% {
                transform: scale(0) rotate(10deg);
                opacity: 0;
            }
            70% {
                transform: scale(1.1) rotate(-5deg);
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        .modal-content h1 {
            color: #e83e8c;
            margin-bottom: 20px;
            font-size: 32px;
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            from {
                text-shadow: 0 0 10px #ff6b9d, 0 0 20px #ff6b9d;
            }
            to {
                text-shadow: 0 0 20px #e83e8c, 0 0 30px #e83e8c;
            }
        }

        .modal-content p {
            color: #d63384;
            font-size: 20px;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .accept-btn {
            background: linear-gradient(to right, #ff6b9d, #e83e8c);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accept-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(232, 62, 140, 0.5);
        }

        .refuse-btn {
            background: #ccc;
            color: #666;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 20px;
            position: relative;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        /* æˆåŠŸæç¤º */
        .success-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }

        .success-content {
            background: linear-gradient(135deg, #fdf2f8 0%, #fef7fb 100%);
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            animation: successAppear 1s ease-out;
        }

        @keyframes successAppear {
            0% {
                transform: translateY(-100px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .success-content h1 {
            color: #e83e8c;
            font-size: 40px;
            margin-bottom: 20px;
        }

        .success-content p {
            color: #d63384;
            font-size: 24px;
            margin-bottom: 30px;
        }

        .heart {
            color: #e83e8c;
            font-size: 60px;
            animation: heartBeat 1.5s ease-in-out infinite;
        }

        @keyframes heartBeat {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.3);
            }
            100% {
                transform: scale(1);
            }
        }

        /* éšè—å…ƒç´  */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- é£˜èŠ±æ•ˆæœå®¹å™¨ -->
    <div id="petal-container"></div>

    <!-- åå­—è¾“å…¥ç•Œé¢ï¼ˆä»…å‘é€æ–¹å¯è§ï¼‰ -->
    <div class="name-container" id="nameContainer">
        <h2>ğŸ’– è¾“å…¥å‘Šç™½å¯¹è±¡çš„åå­— ğŸ’–</h2>
        <input type="text" class="name-input" id="targetName" placeholder="è¯·è¾“å…¥TAçš„åå­—" required>
        <button class="start-btn" id="startBtn">ç”Ÿæˆå‘Šç™½é“¾æ¥</button>
        <div class="share-tip" id="shareTip">âœ¨ å¤åˆ¶ä¸‹æ–¹é“¾æ¥å‘ç»™TA âœ¨</div>
        <div class="share-link" id="shareLink"></div>
    </div>

    <!-- å‘Šç™½å¼¹çª— -->
    <div class="confession-modal" id="confessionModal">
        <div class="modal-content">
            <h1 id="confessionTitle"></h1>
            <p id="confessionContent">
                æ˜Ÿæ²³æ»šçƒ«ï¼Œä½ æ˜¯äººé—´ç†æƒ³<br>
                å±±é‡åƒé‡Œï¼Œä½ æ˜¯è—åœ¨å¾®é£é‡Œçš„æ¬¢å–œ<br>
                æˆ‘æƒ³æŠŠæ‰€æœ‰çš„æ¸©æŸ”å’Œåçˆ±éƒ½ç»™ä½ <br>
                æ„¿æ„åšæˆ‘çš„å”¯ä¸€å—ï¼Ÿ
            </p>
            <div class="btn-group">
                <button class="accept-btn" id="acceptBtn">æˆ‘æ„¿æ„ ğŸ’–</button>
                <button class="refuse-btn" id="refuseBtn">ä¸æ„¿æ„</button>
            </div>
        </div>
    </div>

    <!-- æˆåŠŸæç¤ºå¼¹çª— -->
    <div class="success-modal" id="successModal">
        <div class="success-content">
            <h1>ğŸ‰ å‘Šç™½æˆåŠŸï¼ğŸ‰</h1>
            <p id="successText"></p>
            <div class="heart">â¤ï¸</div>
            <p style="margin-top:20px;">æ„¿æˆ‘ä»¬å²å²å¹´å¹´ï¼Œæ»¡å¿ƒæ¬¢å–œ</p>
        </div>
    </div>

    <script>
        // ç”Ÿæˆé£˜èŠ±æ•ˆæœ
        function createPetals() {
            const container = document.getElementById('petal-container');
            const petalCount = 80;

            for (let i = 0; i < petalCount; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                
                // éšæœºæ ·å¼
                const size = Math.random() * 10 + 5;
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                petal.style.left = `${Math.random() * 100}vw`;
                petal.style.top = `${Math.random() * 100}vh`;
                petal.style.backgroundColor = `rgba(${255}, ${Math.floor(Math.random() * 150 + 100)}, ${Math.floor(Math.random() * 150 + 100)}, ${Math.random() * 0.8 + 0.2})`;
                petal.style.animationDuration = `${Math.random() * 20 + 10}s`;
                petal.style.animationDelay = `${Math.random() * 20}s`;
                
                container.appendChild(petal);
            }
        }

        // ä»URLè·å–å‚æ•°
        function getUrlParam(name) {
            const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);
            const r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURIComponent(r[2]);
            return null;
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            createPetals();
            
            // è·å–DOMå…ƒç´ 
            const nameContainer = document.getElementById('nameContainer');
            const confessionModal = document.getElementById('confessionModal');
            const successModal = document.getElementById('successModal');
            const targetNameInput = document.getElementById('targetName');
            const startBtn = document.getElementById('startBtn');
            const confessionTitle = document.getElementById('confessionTitle');
            const acceptBtn = document.getElementById('acceptBtn');
            const refuseBtn = document.getElementById('refuseBtn');
            const successText = document.getElementById('successText');
            const shareTip = document.getElementById('shareTip');
            const shareLink = document.getElementById('shareLink');

            // æ£€æŸ¥URLä¸­æ˜¯å¦æœ‰å§“åå‚æ•°ï¼ˆæ¥æ”¶æ–¹ï¼‰
            const targetName = getUrlParam('name');
            if (targetName) {
                // æ¥æ”¶æ–¹ï¼šéšè—è¾“å…¥æ¡†ï¼Œç›´æ¥æ˜¾ç¤ºå‘Šç™½å¼¹çª—
                nameContainer.classList.add('hidden');
                confessionTitle.textContent = `${targetName}ï¼Œæˆ‘å–œæ¬¢ä½ ï¼`;
                confessionModal.style.display = 'flex';
            } else {
                // å‘é€æ–¹ï¼šæ˜¾ç¤ºè¾“å…¥æ¡†
                nameContainer.classList.remove('hidden');
            }

            // ç”Ÿæˆå‘Šç™½é“¾æ¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆå‘é€æ–¹ï¼‰
            startBtn.addEventListener('click', function() {
                const inputName = targetNameInput.value.trim();
                if (!inputName) {
                    alert('è¯·è¾“å…¥TAçš„åå­—å“¦ ğŸ’“');
                    return;
                }
                
                // ç”Ÿæˆå¸¦å§“åå‚æ•°çš„é“¾æ¥
                const currentUrl = window.location.href.split('?')[0];
                const confessionUrl = `${currentUrl}?name=${encodeURIComponent(inputName)}`;
                
                // æ˜¾ç¤ºåˆ†äº«æç¤ºå’Œé“¾æ¥
                shareTip.style.display = 'block';
                shareLink.style.display = 'block';
                shareLink.textContent = confessionUrl;
                
                // è‡ªåŠ¨å¤åˆ¶é“¾æ¥
                navigator.clipboard.writeText(confessionUrl).then(() => {
                    alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¯ä»¥å‘ç»™TAå•¦ ğŸ’Œ');
                }).catch(() => {
                    alert('é“¾æ¥å·²ç”Ÿæˆï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å‘ç»™TA ğŸ’Œ');
                });
            });

            // "ä¸æ„¿æ„"æŒ‰é’®é¼ æ ‡ç§»å…¥äº‹ä»¶ï¼ˆéšæœºåç§»ï¼‰
            refuseBtn.addEventListener('mouseenter', function(e) {
                const btn = e.target;
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                const btnWidth = btn.offsetWidth;
                const btnHeight = btn.offsetHeight;

                // éšæœºä½ç½®ï¼ˆç¡®ä¿åœ¨å¯è§†åŒºåŸŸå†…ï¼‰
                const randomX = Math.random() * (windowWidth - btnWidth * 2) + btnWidth;
                const randomY = Math.random() * (windowHeight - btnHeight * 2) + btnHeight;

                // è®¾ç½®æŒ‰é’®ä½ç½®
                btn.style.position = 'absolute';
                btn.style.left = `${randomX}px`;
                btn.style.top = `${randomY}px`;
            });

            // "æˆ‘æ„¿æ„"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            acceptBtn.addEventListener('click', function() {
                const name = targetName || targetNameInput.value.trim();
                successText.textContent = `${name}ï¼Œä½™ç”Ÿè¯·å¤šæŒ‡æ•™ ğŸ’`;
                confessionModal.style.display = 'none';
                successModal.style.display = 'flex';
                
                // ç”Ÿæˆæ›´å¤šçˆ±å¿ƒé£˜èŠ±
                createPetals();
            });

            // é˜»æ­¢ä¸æ„¿æ„æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
            refuseBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                alert('ä½ ä¸èƒ½æ‹’ç»æˆ‘ ğŸ˜œ');
                return false;
            });
        };
    </script>
</body>
</html>